$IncludeConfig diag-common.conf

template(name="tpl" type="string"
	 string="{\"msgnum\":\"%msg:F,58:2%\"}")

module(load="../plugins/omelasticsearch/.libs/omelasticsearch")
:msg, contains, "msgnum:" action(type="omelasticsearch"
			    name="sematext-elasticsearch"
			    server="sematext.com"
			    serverport="80"
			    template="tpl"
			    dynSearchIndex="on"
			    searchIndex="sematext-ip-as-index"
			    searchType="syslog"
			    bulkmode="on"
			    queue.type="FixedArray"
			    queue.size="10000"
			    queue.dequeuebatchsize="1000"
			    action.resumeInterval="10"
			    action.resumeretrycount="5"
			)
